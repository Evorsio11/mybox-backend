spring:
  data:
    redis:
      host: localhost
      port: 6379
      password: redis_password_123
      database: 0
  datasource:
    url: jdbc:postgresql://localhost:5432/devDb
    username: myuser
    password: mypassword
    driver-class-name: org.postgresql.Driver
  jpa:
    hibernate:
      ddl-auto: update
    show-sql: false
    properties:
      hibernate:
        format_sql: false
  security:
    user:
      name: user
      password: dev_password_123
  servlet:
    multipart:
      max-file-size: 10GB
      max-request-size: 10GB
      location: ${mybox.file.storage.temp-dir}

minio:
  endpoint: http://localhost:9000
  access-key: minioadmin
  secret-key: minioadmin123
  bucket: devbucket

server:
  address: 0.0.0.0
  port: 8080

mybox:
  auth:
    jwt:
      secret: my_super_secret_jwt_key_for_development_only_do_not_use_in_production
      expiration: 1d                 # 访问令牌有效期：1天
      refresh-expiration: 7d         # 刷新令牌有效期：7天
      issuer: mybox-server
      audience: mybox-client
      token-prefix: Bearer
    rate-limit:
      # 全局默认配置
      enabled: true                    # 限流功能总开关
      window: 1m                       # 默认时间窗口：30s/5m/1h/1d
      max-requests: 100                # 默认最大请求次数
      scope: user                      # 默认限流对象：global/ip/user
      action: reject                   # 超限处理：reject/queue/delay

      # 各接口具体配置（部署者可以根据需求调整）
      login:
        enabled: true                  # 登录接口限流开关
        window: 5m                     # 时间窗口
        max-requests: 5                # 最大请求次数
        scope: ip                      # 按IP限流（防暴力破解）

      register:
        enabled: true                  # 注册接口限流开关
        window: 1h                     # 时间窗口
        max-requests: 3                # 最大请求次数
        scope: ip                      # 按IP限流（防批量注册）

      refresh:
        enabled: true                  # 刷新令牌限流开关
        window: 1m                     # 时间窗口
        max-requests: 10               # 最大请求次数
        scope: user                    # 按用户限流

      logout:
        enabled: true                  # 登出接口限流开关
        window: 1m                     # 时间窗口
        max-requests: 10               # 最大请求次数
        scope: user                    # 按用户限流
  common:
    cors:
      allowed-origins: http://192.168.1.11:3000, http://localhost:3000
  file:
    storage:                                # 存储相关限制
      temp-dir: E:/mybox/temp              # 临时文件目录
      max-file-size: 2GB                    # 单文件最大大小
      max-total-size: 10GB                  # 用户总存储上限
      retention: 168h      # 7天 = 168小时
    upload:                                 # 上传策略
      types:                                # 文件类型相关策略
        allow-all: false
        allowed-content-types:
          - image/png
          - image/jpeg
          - image/gif
          - application/pdf
          - text/plain
        allowed-extensions:
          - png
          - jpg
          - jpeg
          - gif
          - pdf
          - txt
      chunk:                                # 分片上传策略
        enabled: true
        min-size: 100MB                     # 启用分片上传的最小文件大小
        chunk-size: 5MB                      # 每个分片大小
        enable-concurrent: true              # 是否启用并发上传
        max-concurrent: 4                    # 最大并发上传数
        enable-deduplication: true           # 是否启用去重
        deduplication-strategy: merge        # 去重策略: merge 或 chunk
        session-timeout: 24h                 # 上传会话过期时间
        max-retry: 3                         # 单分片最大重试次数
        retry-delay: 5s                       # 分片重试间隔
        cleanup-expired: true                 # 自动清理过期会话
        cleanup-interval: 1h                  # 清理间隔
    download:                               # 下载策略
      enable-rate-limit: true
      max-bytes-per-second: 500KB           # 最大下载速度


